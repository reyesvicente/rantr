{% extends 'base.html' %}

{% block content %}
<a href="{% url 'users:detail' rant.user.username %}">{{ rant.user.username }}</a><br />
{{ rant.content }} <br />
{{ rant.created }} <br />
{% if rant.image %}
  <img src="{{ rant.image.url }}"> <br />
{% endif %}
<!-- LIKES -->
<a href="{% url 'likes:rant-likes' rant.slug %}">{{ likes_count }} like{{ likes_count|pluralize }}</a>

    {% if user.is_authenticated %}
        {% if user_like %}
            <a href="{% url 'likes:rant-unlike' rant.slug %}">Unlike</a> 
        {% else %}
            <a href="{% url 'likes:rant-like' rant.slug %}">Like</a>
        {% endif %}
    {% endif %}
    {% if comment > 0 %}
        <h1>Comments:</h1>
    {% endif %}
    {% for comment in rant.comment_set.all %}
        <p><a href="{% url 'users:detail' comment.user.username %}">{{ comment.user.username }}</a></p>
        <p>{{ comment.created }}</p>
        <p>{{ comment.content }}</p>
        
        {% for child in comment.children.all %}
            <p>{{ comment.user.username }}</p>
            <p>{{ comment.created }}</p>
            <p class="child">{{ child.content }}</p>
        {% endfor %}
        
    {% endfor %}
  
    <form method="post" onsubmit="this.method='POST'" action="{% url 'comments:add_comment' rant.uuid %}">
            {% csrf_token %}
            
            <input type="text" name="content">
            <input type="hidden" name="parent_id" value="{{ comment.id }}">
            
            <input class="btn btn-primary" type="submit" value="Reply">
        </form>
{% endblock content %}